<UserControl x:Class="CyberIncidentWPF.Controls.PieChart"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="500">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        
        <!-- Chart Canvas -->
        <Canvas x:Name="ChartCanvas" Grid.Column="0" 
                Width="220" Height="220" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Center"/>
        
        <!-- Legend -->
        <ItemsControl x:Name="LegendItems" Grid.Column="1" 
                      Margin="12,0,0,0"
                      VerticalAlignment="Center">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="0,6" VerticalAlignment="Center">
                        <Border Width="14" Height="14" 
                                Margin="0,0,10,0" 
                                VerticalAlignment="Center"
                                CornerRadius="2">
                            <Border.Background>
                                <SolidColorBrush Color="{Binding Color}"/>
                            </Border.Background>
                        </Border>
                        <TextBlock FontSize="12" 
                                   Foreground="#374151" 
                                   VerticalAlignment="Center"
                                   FontWeight="Medium">
                            <TextBlock.Inlines>
                                <Run Text="{Binding Label}"/>
                                <Run Text=" (" Foreground="#6B7280"/>
                                <Run Text="{Binding Value}" FontWeight="Bold"/>
                                <Run Text=")" Foreground="#6B7280"/>
                            </TextBlock.Inlines>
                        </TextBlock>
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</UserControl>
